!function(e,t){"use strict";function s(t){t=e.extend({},D,t||{}),null===S&&(S=e("body"));for(var s=e(this),r=0,a=s.length;a>r;r++)l(s.eq(r),t);return s}function l(t,s){if(!t.hasClass("selecter-element")){s=e.extend({},s,t.data("selecter-options")),s.multiple=t.prop("multiple"),s.disabled=t.is(":disabled"),s.external&&(s.links=!0);var l=t.find("[selected]").not(":disabled"),o=t.find("option").index(l);s.multiple||""===s.label?s.label="":(t.prepend('<option value="" class="selecter-placeholder" selected>'+s.label+"</option>"),o>-1&&o++);var i=t.find("option, optgroup"),c=i.filter("option");l.length||(l=c.eq(0));var d=o>-1?o:0,m=""!==s.label?s.label:l.text(),g="div";s.tabIndex=t[0].tabIndex,t[0].tabIndex=-1;var x="",C="";C+="<"+g+' class="selecter '+s.customClass,W?C+=" mobile":s.cover&&(C+=" cover"),C+=s.multiple?" multiple":" closed",s.disabled&&(C+=" disabled"),C+='" tabindex="'+s.tabIndex+'">',C+="</"+g+">",s.multiple||(x+='<span class="selecter-selected">',x+=e("<span></span>").text(y(m,s.trim)).html(),x+="</span>"),x+='<div class="selecter-options">',x+="</div>",t.addClass("selecter-element").wrap(C).after(x);var k=t.parent(".selecter"),P=e.extend({$select:t,$allOptions:i,$options:c,$selecter:k,$selected:k.find(".selecter-selected"),$itemsWrapper:k.find(".selecter-options"),index:-1,guid:q++},s);r(P),P.multiple||b(d,P),void 0!==e.fn.scroller&&P.$itemsWrapper.scroller(),P.$selecter.on("touchstart.selecter",".selecter-selected",P,a).on("click.selecter",".selecter-selected",P,n).on("click.selecter",".selecter-item",P,u).on("close.selecter",P,p).data("selecter",P),P.$select.on("change.selecter",P,f),W||(P.$selecter.on("focusin.selecter",P,v).on("blur.selecter",P,h),P.$select.on("focusin.selecter",P,function(e){e.data.$selecter.trigger("focus")}))}}function r(t){for(var s="",l=t.links?"a":"span",r=0,a=0,o=t.$allOptions.length;o>a;a++){var i=t.$allOptions.eq(a);if("OPTGROUP"===i[0].tagName)s+='<span class="selecter-group',i.is(":disabled")&&(s+=" disabled"),s+='">'+i.attr("label")+"</span>";else{var n=i.val();i.attr("value")||i.attr("value",n),s+="<"+l+' class="selecter-item',i.hasClass("selecter-placeholder")&&(s+=" placeholder"),i.is(":selected")&&(s+=" selected"),i.is(":disabled")&&(s+=" disabled"),s+='" ',s+=t.links?'href="'+n+'"':'data-value="'+n+'"',s+=">"+e("<span></span>").text(y(i.text(),t.trim)).html()+"</"+l+">",r++}}t.$itemsWrapper.html(s),t.$items=t.$selecter.find(".selecter-item")}function a(e){e.stopPropagation();var t=e.data;t.touchStartEvent=e.originalEvent,t.touchStartX=t.touchStartEvent.touches[0].clientX,t.touchStartY=t.touchStartEvent.touches[0].clientY,t.$selecter.on("touchmove.selecter",".selecter-selected",t,o).on("touchend.selecter",".selecter-selected",t,i)}function o(e){var t=e.data,s=e.originalEvent;(Math.abs(s.touches[0].clientX-t.touchStartX)>10||Math.abs(s.touches[0].clientY-t.touchStartY)>10)&&t.$selecter.off("touchmove.selecter touchend.selecter")}function i(e){var t=e.data;t.touchStartEvent.preventDefault(),t.$selecter.off("touchmove.selecter touchend.selecter"),n(e)}function n(s){s.preventDefault(),s.stopPropagation();var l=s.data;if(!l.$select.is(":disabled"))if(e(".selecter").not(l.$selecter).trigger("close.selecter",[l]),l.mobile||!W||w)l.$selecter.hasClass("closed")?c(s):l.$selecter.hasClass("open")&&p(s);else{var r=l.$select[0];if(t.document.createEvent){var a=t.document.createEvent("MouseEvents");a.initMouseEvent("mousedown",!1,!0,t,0,0,0,0,0,!1,!1,!1,!1,0,null),r.dispatchEvent(a)}else r.fireEvent&&r.fireEvent("onmousedown")}}function c(e){e.preventDefault(),e.stopPropagation();var t=e.data;if(!t.$selecter.hasClass("open")){var s=t.$selecter.offset(),l=S.outerHeight(),r=t.$itemsWrapper.outerHeight(!0);t.index>=0?t.$items.eq(t.index).position():{left:0,top:0},s.top+r>l&&t.$selecter.addClass("bottom"),t.$itemsWrapper.show(),t.$selecter.removeClass("closed").addClass("open"),S.on("click.selecter-"+t.guid,":not(.selecter-options)",t,d),g(t)}}function d(t){t.preventDefault(),t.stopPropagation(),0===e(t.currentTarget).parents(".selecter").length&&p(t)}function p(e){e.preventDefault(),e.stopPropagation();var t=e.data;t.$selecter.hasClass("open")&&(t.$itemsWrapper.hide(),t.$selecter.removeClass("open bottom").addClass("closed"),S.off(".selecter-"+t.guid))}function u(t){t.preventDefault(),t.stopPropagation();var s=e(this),l=t.data;if(!l.$select.is(":disabled")){if(l.$itemsWrapper.is(":visible")){var r=l.$items.index(s);r!==l.index&&(b(r,l),x(l))}l.multiple||p(t)}}function f(t,s){var l=e(this),r=t.data;if(!s&&!r.multiple){var a=r.$options.index(r.$options.filter("[value='"+k(l.val())+"']"));b(a,r),x(r)}}function v(t){t.preventDefault(),t.stopPropagation();var s=t.data;s.$select.is(":disabled")||s.multiple||(s.$selecter.addClass("focus").on("keydown.selecter-"+s.guid,s,m),e(".selecter").not(s.$selecter).trigger("close.selecter",[s]))}function h(t){t.preventDefault(),t.stopPropagation();var s=t.data;s.$selecter.removeClass("focus").off("keydown.selecter-"+s.guid),e(".selecter").not(s.$selecter).trigger("close.selecter",[s])}function m(t){var s=t.data;if(13===t.keyCode)s.$selecter.hasClass("open")&&(p(t),b(s.index,s)),x(s);else if(!(9===t.keyCode||t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)){t.preventDefault(),t.stopPropagation();var l=s.$items.length-1,r=s.index<0?0:s.index;if(e.inArray(t.keyCode,E?[38,40,37,39]:[38,40])>-1)r+=38===t.keyCode||E&&37===t.keyCode?-1:1,0>r&&(r=0),r>l&&(r=l);else{var a,o,i=String.fromCharCode(t.keyCode).toUpperCase();for(o=s.index+1;l>=o;o++)if(a=s.$options.eq(o).text().charAt(0).toUpperCase(),a===i){r=o;break}if(0>r||r===s.index)for(o=0;l>=o;o++)if(a=s.$options.eq(o).text().charAt(0).toUpperCase(),a===i){r=o;break}}r>=0&&(b(r,s),g(s))}}function b(e,t){var s=t.$items.eq(e),l=s.hasClass("selected"),r=s.hasClass("disabled");if(!r)if(t.multiple)l?(t.$options.eq(e).prop("selected",null),s.removeClass("selected")):(t.$options.eq(e).prop("selected",!0),s.addClass("selected"));else if(e>-1&&e<t.$items.length){var a=s.html();s.data("value"),t.$selected.html(a).removeClass("placeholder"),t.$items.filter(".selected").removeClass("selected"),t.$select[0].selectedIndex=e,s.addClass("selected"),t.index=e}else""!==t.label&&t.$selected.html(t.label)}function g(t){var s=t.$items.eq(t.index),l=t.index>=0&&!s.hasClass("placeholder")?s.position():{left:0,top:0};void 0!==e.fn.scroller?t.$itemsWrapper.scroller("scroll",t.$itemsWrapper.find(".scroller-content").scrollTop()+l.top,0).scroller("reset"):t.$itemsWrapper.scrollTop(t.$itemsWrapper.scrollTop()+l.top)}function x(e){e.links?C(e):(e.callback.call(e.$selecter,e.$select.val(),e.index),e.$select.trigger("change",[!0]))}function C(e){var s=e.$select.val();e.external?t.open(s):t.location.href=s}function y(e,t){return 0===t?e:e.length>t?e.substring(0,t)+"...":e}function k(e){return"string"==typeof e?e.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"):e}var q=0,P=t.navigator.userAgent||t.navigator.vendor||t.opera,E=/Firefox/i.test(P),W=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(P),w=E&&W,S=null,D={callback:e.noop,cover:!1,customClass:"",label:"",external:!1,links:!1,mobile:!1,trim:0},O={defaults:function(t){return D=e.extend(D,t||{}),"object"==typeof this?e(this):!0},disable:function(t){return e(this).each(function(s,l){var r=e(l).parent(".selecter").data("selecter");if(r)if("undefined"!=typeof t){var a=r.$items.index(r.$items.filter("[data-value="+t+"]"));r.$items.eq(a).addClass("disabled"),r.$options.eq(a).prop("disabled",!0)}else r.$selecter.hasClass("open")&&r.$selecter.find(".selecter-selected").trigger("click.selecter"),r.$selecter.addClass("disabled"),r.$select.prop("disabled",!0)})},destroy:function(){return e(this).each(function(t,s){var l=e(s).parent(".selecter").data("selecter");l&&(l.$selecter.hasClass("open")&&l.$selecter.find(".selecter-selected").trigger("click.selecter"),void 0!==e.fn.scroller&&l.$selecter.find(".selecter-options").scroller("destroy"),l.$select[0].tabIndex=l.tabIndex,l.$select.find(".selecter-placeholder").remove(),l.$selected.remove(),l.$itemsWrapper.remove(),l.$selecter.off(".selecter"),l.$select.off(".selecter").removeClass("selecter-element").show().unwrap())})},enable:function(t){return e(this).each(function(s,l){var r=e(l).parent(".selecter").data("selecter");if(r)if("undefined"!=typeof t){var a=r.$items.index(r.$items.filter("[data-value="+t+"]"));r.$items.eq(a).removeClass("disabled"),r.$options.eq(a).prop("disabled",!1)}else r.$selecter.removeClass("disabled"),r.$select.prop("disabled",!1)})},refresh:function(){return O.update.apply(e(this))},update:function(){return e(this).each(function(t,s){var l=e(s).parent(".selecter").data("selecter");if(l){var a=l.index;l.$allOptions=l.$select.find("option, optgroup"),l.$options=l.$allOptions.filter("option"),l.index=-1,a=l.$options.index(l.$options.filter(":selected")),r(l),l.multiple||b(a,l)}})}};e.fn.selecter=function(e){return O[e]?O[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?this:s.apply(this,arguments)},e.selecter=function(e){"defaults"===e&&O.defaults.apply(this,Array.prototype.slice.call(arguments,1))}}(jQuery,window);