!function($,e){"use strict";function t(e){e=$.extend({},S,e||{}),null===w&&(w=$("body"));for(var t=$(this),l=0,r=t.length;r>l;l++)s(t.eq(l),e);return t}function s(e,t){if(!e.hasClass("selecter-element")){t=$.extend({},t,e.data("selecter-options")),t.multiple=e.prop("multiple"),t.disabled=e.is(":disabled"),t.external&&(t.links=!0);var s=e.find("[selected]").not(":disabled"),a=e.find("option").index(s);t.multiple||""===t.label?t.label="":(e.prepend('<option value="" class="selecter-placeholder" selected>'+t.label+"</option>"),a>-1&&a++);var o=e.find("option, optgroup"),n=o.filter("option");s.length||(s=n.eq(0));var c=a>-1?a:0,h=""!==t.label?t.label:s.text(),b="div";t.tabIndex=e[0].tabIndex,e[0].tabIndex=-1;var g="",x="";x+="<"+b+' class="selecter '+t.customClass,E?x+=" mobile":t.cover&&(x+=" cover"),x+=t.multiple?" multiple":" closed",t.disabled&&(x+=" disabled"),x+='" tabindex="'+t.tabIndex+'">',x+="</"+b+">",t.multiple||(g+='<span class="selecter-selected">',g+=$("<span></span>").text(C(h,t.trim)).html(),g+="</span>"),g+='<div class="selecter-options">',g+="</div>",e.addClass("selecter-element").wrap(x).after(g);var y=e.parent(".selecter"),q=$.extend({$select:e,$allOptions:o,$options:n,$selecter:y,$selected:y.find(".selecter-selected"),$itemsWrapper:y.find(".selecter-options"),index:-1,guid:k++},t);l(q),q.multiple||m(c,q),void 0!==$.fn.scroller&&q.$itemsWrapper.scroller(),q.$selecter.on("touchstart.selecter",".selecter-selected",q,r).on("click.selecter",".selecter-selected",q,i).on("click.selecter",".selecter-item",q,p).on("close.selecter",q,d).data("selecter",q),q.$select.on("change.selecter",q,u),E||(q.$selecter.on("focusin.selecter",q,f).on("blur.selecter",q,v),q.$select.on("focusin.selecter",q,function(e){e.data.$selecter.trigger("focus")}))}}function l(e){for(var t="",s=e.links?"a":"span",l=0,r=0,a=e.$allOptions.length;a>r;r++){var o=e.$allOptions.eq(r);if("OPTGROUP"===o[0].tagName)t+='<span class="selecter-group',o.is(":disabled")&&(t+=" disabled"),t+='">'+o.attr("label")+"</span>";else{var i=o.val();o.attr("value")||o.attr("value",i),t+="<"+s+' class="selecter-item',o.hasClass("selecter-placeholder")&&(t+=" placeholder"),o.is(":selected")&&(t+=" selected"),o.is(":disabled")&&(t+=" disabled"),t+='" ',t+=e.links?'href="'+i+'"':'data-value="'+i+'"',t+=">"+$("<span></span>").text(C(o.text(),e.trim)).html()+"</"+s+">",l++}}e.$itemsWrapper.html(t),e.$items=e.$selecter.find(".selecter-item")}function r(e){e.stopPropagation();var t=e.data;t.touchStartEvent=e.originalEvent,t.touchStartX=t.touchStartEvent.touches[0].clientX,t.touchStartY=t.touchStartEvent.touches[0].clientY,t.$selecter.on("touchmove.selecter",".selecter-selected",t,a).on("touchend.selecter",".selecter-selected",t,o)}function a(e){var t=e.data,s=e.originalEvent;(Math.abs(s.touches[0].clientX-t.touchStartX)>10||Math.abs(s.touches[0].clientY-t.touchStartY)>10)&&t.$selecter.off("touchmove.selecter touchend.selecter")}function o(e){var t=e.data;t.touchStartEvent.preventDefault(),t.$selecter.off("touchmove.selecter touchend.selecter"),i(e)}function i(t){t.preventDefault(),t.stopPropagation();var s=t.data;if(!s.$select.is(":disabled"))if($(".selecter").not(s.$selecter).trigger("close.selecter",[s]),s.mobile||!E||W)s.$selecter.hasClass("closed")?n(t):s.$selecter.hasClass("open")&&d(t);else{var l=s.$select[0];if(e.document.createEvent){var r=e.document.createEvent("MouseEvents");r.initMouseEvent("mousedown",!1,!0,e,0,0,0,0,0,!1,!1,!1,!1,0,null),l.dispatchEvent(r)}else l.fireEvent&&l.fireEvent("onmousedown")}}function n(e){e.preventDefault(),e.stopPropagation();var t=e.data;if(!t.$selecter.hasClass("open")){var s=t.$selecter.offset(),l=w.outerHeight(),r=t.$itemsWrapper.outerHeight(!0),a=t.index>=0?t.$items.eq(t.index).position():{left:0,top:0};s.top+r>l&&t.$selecter.addClass("bottom"),t.$itemsWrapper.show(),t.$selecter.removeClass("closed").addClass("open"),w.on("click.selecter-"+t.guid,":not(.selecter-options)",t,c),b(t)}}function c(e){e.preventDefault(),e.stopPropagation(),0===$(e.currentTarget).parents(".selecter").length&&d(e)}function d(e){e.preventDefault(),e.stopPropagation();var t=e.data;t.$selecter.hasClass("open")&&(t.$itemsWrapper.hide(),t.$selecter.removeClass("open bottom").addClass("closed"),w.off(".selecter-"+t.guid))}function p(e){e.preventDefault(),e.stopPropagation();var t=$(this),s=e.data;if(!s.$select.is(":disabled")){if(s.$itemsWrapper.is(":visible")){var l=s.$items.index(t);l!==s.index&&(m(l,s),g(s))}s.multiple||d(e)}}function u(e,t){var s=$(this),l=e.data;if(!t&&!l.multiple){var r=l.$options.index(l.$options.filter("[value='"+y(s.val())+"']"));m(r,l),g(l)}}function f(e){e.preventDefault(),e.stopPropagation();var t=e.data;t.$select.is(":disabled")||t.multiple||(t.$selecter.addClass("focus").on("keydown.selecter-"+t.guid,t,h),$(".selecter").not(t.$selecter).trigger("close.selecter",[t]))}function v(e,t,s){e.preventDefault(),e.stopPropagation();var l=e.data;l.$selecter.removeClass("focus").off("keydown.selecter-"+l.guid),$(".selecter").not(l.$selecter).trigger("close.selecter",[l])}function h(e){var t=e.data;if(13===e.keyCode)t.$selecter.hasClass("open")&&(d(e),m(t.index,t)),g(t);else if(!(9===e.keyCode||e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)){e.preventDefault(),e.stopPropagation();var s=t.$items.length-1,l=t.index<0?0:t.index;if($.inArray(e.keyCode,P?[38,40,37,39]:[38,40])>-1)l+=38===e.keyCode||P&&37===e.keyCode?-1:1,0>l&&(l=0),l>s&&(l=s);else{var r=String.fromCharCode(e.keyCode).toUpperCase(),a,o;for(o=t.index+1;s>=o;o++)if(a=t.$options.eq(o).text().charAt(0).toUpperCase(),a===r){l=o;break}if(0>l||l===t.index)for(o=0;s>=o;o++)if(a=t.$options.eq(o).text().charAt(0).toUpperCase(),a===r){l=o;break}}l>=0&&(m(l,t),b(t))}}function m(e,t){var s=t.$items.eq(e),l=s.hasClass("selected"),r=s.hasClass("disabled");if(!r)if(t.multiple)l?(t.$options.eq(e).prop("selected",null),s.removeClass("selected")):(t.$options.eq(e).prop("selected",!0),s.addClass("selected"));else if(e>-1&&e<t.$items.length){var a=s.html(),o=s.data("value");t.$selected.html(a).removeClass("placeholder"),t.$items.filter(".selected").removeClass("selected"),t.$select[0].selectedIndex=e,s.addClass("selected"),t.index=e}else""!==t.label&&t.$selected.html(t.label)}function b(e){var t=e.$items.eq(e.index),s=e.index>=0&&!t.hasClass("placeholder")?t.position():{left:0,top:0};void 0!==$.fn.scroller?e.$itemsWrapper.scroller("scroll",e.$itemsWrapper.find(".scroller-content").scrollTop()+s.top,0).scroller("reset"):e.$itemsWrapper.scrollTop(e.$itemsWrapper.scrollTop()+s.top)}function g(e){e.links?x(e):(e.callback.call(e.$selecter,e.$select.val(),e.index),e.$select.trigger("change",[!0]))}function x(t){var s=t.$select.val();t.external?e.open(s):e.location.href=s}function C(e,t){return 0===t?e:e.length>t?e.substring(0,t)+"...":e}function y(e){return"string"==typeof e?e.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"):e}var k=0,q=e.navigator.userAgent||e.navigator.vendor||e.opera,P=/Firefox/i.test(q),E=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(q),W=P&&E,w=null,S={callback:$.noop,cover:!1,customClass:"",label:"",external:!1,links:!1,mobile:!1,trim:0},D={defaults:function(e){return S=$.extend(S,e||{}),"object"==typeof this?$(this):!0},disable:function(e){return $(this).each(function(t,s){var l=$(s).parent(".selecter").data("selecter");if(l)if("undefined"!=typeof e){var r=l.$items.index(l.$items.filter("[data-value="+e+"]"));l.$items.eq(r).addClass("disabled"),l.$options.eq(r).prop("disabled",!0)}else l.$selecter.hasClass("open")&&l.$selecter.find(".selecter-selected").trigger("click.selecter"),l.$selecter.addClass("disabled"),l.$select.prop("disabled",!0)})},destroy:function(){return $(this).each(function(e,t){var s=$(t).parent(".selecter").data("selecter");s&&(s.$selecter.hasClass("open")&&s.$selecter.find(".selecter-selected").trigger("click.selecter"),void 0!==$.fn.scroller&&s.$selecter.find(".selecter-options").scroller("destroy"),s.$select[0].tabIndex=s.tabIndex,s.$select.find(".selecter-placeholder").remove(),s.$selected.remove(),s.$itemsWrapper.remove(),s.$selecter.off(".selecter"),s.$select.off(".selecter").removeClass("selecter-element").show().unwrap())})},enable:function(e){return $(this).each(function(t,s){var l=$(s).parent(".selecter").data("selecter");if(l)if("undefined"!=typeof e){var r=l.$items.index(l.$items.filter("[data-value="+e+"]"));l.$items.eq(r).removeClass("disabled"),l.$options.eq(r).prop("disabled",!1)}else l.$selecter.removeClass("disabled"),l.$select.prop("disabled",!1)})},refresh:function(){return D.update.apply($(this))},update:function(){return $(this).each(function(e,t){var s=$(t).parent(".selecter").data("selecter");if(s){var r=s.index;s.$allOptions=s.$select.find("option, optgroup"),s.$options=s.$allOptions.filter("option"),s.index=-1,r=s.$options.index(s.$options.filter(":selected")),l(s),s.multiple||m(r,s)}})}};$.fn.selecter=function(e){return D[e]?D[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?this:t.apply(this,arguments)},$.selecter=function(e){"defaults"===e&&D.defaults.apply(this,Array.prototype.slice.call(arguments,1))}}(jQuery,window);